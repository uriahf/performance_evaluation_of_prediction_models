{
  "hash": "51ef9d8c32a379f629b8462baa1d01b2",
  "result": {
    "markdown": "---\ntitle: \"Performance Evaluation of Prediction Models with Binary Outcome\"\nauthor: \"Uriah Finkel\"\nformat:\n  revealjs:\n    theme:  [solarized, custom.scss]\n    incremental: true\n---\n\n\n## Agenda\n\n-   Introducing some of the most common or useful (and sometimes not so common) Performance Metrics and Curves.\n\n-   Discussing how and when to use (and when not to use) the mentioned performance metrics.\n\n## Code for Performance Metrics and Curves\n\nAll interactive plots in this presentation were created with [**rtichoke**](https://uriahf.github.io/rtichoke/) (I am the author ğŸ‘‹).\n\n![](https://rtichoke-blog.netlify.app/gaston_rtichoke.png){width=\"200\"}\n\nYou are also invited to explore [**rtichoke blog**](https://rtichoke-blog.netlify.app/) for reproducible examples and some theory.\n\n## Motivation\n\n### Why using performance metrics? ğŸ¥‡ğŸ¥ˆğŸ¥‰\n\n-   Choosing between different candidate models.\n-   Choosing between candidate features\n-   Choosing whether the prediction model will do more harm than good.\n\n## Motivation\n\n### Relevant Criteria besides Performance ğŸ¤”\n\n-   How difficult is it to implement the model?\n-   How difficult is it to explain the model?\n\n## Categories of Performance Metrics and Curves\n\n-   **Discrimination ğŸ––**: Model's ability to separate between events and non-events.\n\n-   **Calibration âš–ï¸**: Agreement between predicted probabilities and the observed outcomes.\n\n-   **Utility ğŸ‘Œ**: The usefulness of the model in terms of decision-making.\n\n------------------------------------------------------------------------\n\n::: columns\n::: {.column width=\"50%\"}\n### [Green]{style=\"color: green;\"} {style=\"text-align: center; font-size: 200px;\"}\n\n::: {style=\"height:123px; width:100%; clear:both;\"}\n:::\n\n### **ğŸ™‚** {style=\"text-align: center; font-size: 120px;\"}\n:::\n\n::: {.column width=\"50%\"}\n### [Red]{style=\"color: red;\"} {style=\"text-align: center; font-size: 200px;\"}\n\n::: {style=\"height:123px; width:100%; clear:both;\"}\n:::\n\n### **ğŸ™** {style=\"text-align: center; font-size: 120px;\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n::: columns\n::: {.column width=\"50%\"}\n### [Green]{style=\"color: green;\"} {style=\"text-align: center; font-size: 200px;\"}\n\n::: {style=\"height: 0px; width:100%; clear:both;\"}\n:::\n\n![](Maccabi_Haifa_FC_logo.svg){fig-align=\"center\" width=\"200\"}\n:::\n\n::: {.column width=\"50%\"}\n### [Red]{style=\"color: red;\"} {style=\"text-align: center; font-size: 200px;\"}\n\n::: {style=\"height: 49px; width:100%; clear:both;\"}\n:::\n\n![](Hapoel_Haifa_Football_Club_Logo.png){fig-align=\"center\" width=\"200\"}\n:::\n:::\n\n# Discrimination ğŸ––\n\n## Discrimination ğŸ––\n\nThis is the most known and used category of performance metrics and curves.\n\n## [True Positives]{style=\"color: green;\"} {.smaller}\n\n### Infected and Predicted as Infected - [Good]{style=\"color: green;\"}\n\n[**ğŸ’Š**]{style=\"font-size: 50px;\"} <br> [ğŸ¤¢]{style=\"font-size: 50px;\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-7b58706f3e67622a3579\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7b58706f3e67622a3579\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"type\":[\"Real Positive\",\"Real Negative\"],\"predicted_positive\":[\"TP\",\"FP\"],\"predicted_negative\":[\"FN\",\"TN\"]},\"columns\":[{\"accessor\":\"type\",\"name\":\"\",\"type\":\"character\",\"align\":\"left\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":{\"fontWeight\":100}},{\"accessor\":\"predicted_positive\",\"name\":\"Predicted Positive\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600,\"background\":\"lightgreen\"},{\"fontWeight\":600,\"background\":null}]},{\"accessor\":\"predicted_negative\",\"name\":\"Predicted Negative\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600},{\"fontWeight\":600}]}],\"sortable\":false,\"defaultPageSize\":10,\"paginationType\":\"numbers\",\"showPageInfo\":true,\"minRows\":1,\"inline\":true,\"theme\":{\"backgroundColor\":\"#fdf6e3\"},\"dataKey\":\"0e87a4d202a6e42067acce914af1bd56\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## [False Positives]{style=\"color: red;\"} {.smaller}\n\n### Not-Infected and Predicted as Infected - [BAD]{style=\"color: red;\"}\n\n[**ğŸ’Š**]{style=\"font-size: 50px;\"} <br> [ğŸ¤¨]{style=\"font-size: 50px;\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-41163ab088b56b4868b3\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-41163ab088b56b4868b3\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"type\":[\"Real Positive\",\"Real Negative\"],\"predicted_positive\":[\"TP\",\"FP\"],\"predicted_negative\":[\"FN\",\"TN\"]},\"columns\":[{\"accessor\":\"type\",\"name\":\"\",\"type\":\"character\",\"align\":\"left\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":{\"fontWeight\":100}},{\"accessor\":\"predicted_positive\",\"name\":\"Predicted Positive\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600,\"background\":null},{\"fontWeight\":600,\"background\":\"pink\"}]},{\"accessor\":\"predicted_negative\",\"name\":\"Predicted Negative\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600},{\"fontWeight\":600}]}],\"sortable\":false,\"defaultPageSize\":10,\"paginationType\":\"numbers\",\"showPageInfo\":true,\"minRows\":1,\"inline\":true,\"theme\":{\"backgroundColor\":\"#fdf6e3\"},\"dataKey\":\"481602af31df52dab4020d6cbdbba680\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## [False Negatives]{style=\"color: red;\"} {.smaller}\n\n### Infected and Predicted as Not-Infected - [BAD]{style=\"color: red;\"}\n\n<br> [ğŸ¤¢]{style=\"font-size: 50px;\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-afcfe4c049b52b40749a\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-afcfe4c049b52b40749a\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"type\":[\"Real Positive\",\"Real Negative\"],\"predicted_positive\":[\"TP\",\"FP\"],\"predicted_negative\":[\"FN\",\"TN\"]},\"columns\":[{\"accessor\":\"type\",\"name\":\"\",\"type\":\"character\",\"align\":\"left\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":{\"fontWeight\":100}},{\"accessor\":\"predicted_positive\",\"name\":\"Predicted Positive\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600},{\"fontWeight\":600}]},{\"accessor\":\"predicted_negative\",\"name\":\"Predicted Negative\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600,\"background\":\"pink\"},{\"fontWeight\":600,\"background\":null}]}],\"sortable\":false,\"defaultPageSize\":10,\"paginationType\":\"numbers\",\"showPageInfo\":true,\"minRows\":1,\"inline\":true,\"theme\":{\"backgroundColor\":\"#fdf6e3\"},\"dataKey\":\"9899aad0c3275e615a5f64b37cbf4d85\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## [True Negatives]{style=\"color: green;\"} {.smaller}\n\n### Not-Infected and Predicted as Not-Infected - [BAD]{style=\"color: green;\"}\n\n<br> [ğŸ¤¨]{style=\"font-size: 50px;\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-e99564aeaed4f0be42a0\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-e99564aeaed4f0be42a0\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"type\":[\"Real Positive\",\"Real Negative\"],\"predicted_positive\":[\"TP\",\"FP\"],\"predicted_negative\":[\"FN\",\"TN\"]},\"columns\":[{\"accessor\":\"type\",\"name\":\"\",\"type\":\"character\",\"align\":\"left\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":{\"fontWeight\":100}},{\"accessor\":\"predicted_positive\",\"name\":\"Predicted Positive\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600},{\"fontWeight\":600}]},{\"accessor\":\"predicted_negative\",\"name\":\"Predicted Negative\",\"type\":\"character\",\"align\":\"center\",\"headerStyle\":{\"fontWeight\":100},\"minWidth\":200,\"style\":[{\"fontWeight\":600,\"background\":null},{\"fontWeight\":600,\"background\":\"lightgreen\"}]}],\"sortable\":false,\"defaultPageSize\":10,\"paginationType\":\"numbers\",\"showPageInfo\":true,\"minRows\":1,\"inline\":true,\"theme\":{\"backgroundColor\":\"#fdf6e3\"},\"dataKey\":\"fc6b82a5989b085e90f9be912e39ffb3\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Probability Threshold:\n\n-   Most Performance Metrics are estimated by using a Probability Threshold in order to classify each probability to Predicted Negative (Do not Treat) or Predicted Positive (Treat ğŸ’Š).\\\n\n-   This type of dichotomization is being used when the intervention carries a **potential risk** and there is a trade-off of risks between the intervention and the outcome.\n\n## Probability Threshold:\n\n<table>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.6</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.7</p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.2</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n</tbody>\n</table>\n\n## Low Probability Threshold:\n\nLow Probability Threshold means that I'm worried about the **outcome**:\n\n-   I'm worried about **Prostate Cancer** ğŸ¦€\n-   I'm worried about **Heart Disease** ğŸ’”\n-   I'm worried about **Infection** ğŸ¤¢\n\n## Probability Threshold of 0.25\n\n<table>\n<thead>\n<tr class=\"header\">\n<th style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></th>\n<th style=\"text-align: center;\"><p>0.3</p></th>\n<th style=\"text-align: center;\"><p>0.6</p></th>\n<th style=\"text-align: center;\"><p>0.4</p></th>\n<th style=\"text-align: center;\"><p>0.1</p></th>\n<th style=\"text-align: center;\"><p>0.4</p></th>\n<th style=\"text-align: center;\"><p>0.7</p></th>\n<th style=\"text-align: center;\"><p>0.3</p></th>\n<th style=\"text-align: center;\"><p>0.1</p></th>\n<th style=\"text-align: center;\"><p>0.2</p></th>\n<th style=\"text-align: center;\"><p>0.1</p></th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>Å¶</strong></p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n</tr>\n</tbody>\n</table>\n\n## High Probability Threshold:\n\nHigh Probability Threshold means that I'm worried about the **Intervention**:\n\n-   I'm worried about **Biopsy** ğŸ’‰\n\n-   I'm worried about **Statins** ğŸ’Š\n\n-   I'm worried about **Antibiotics** ğŸ’Š\n\n## Probability Threshold of 0.55\n\n<table>\n<thead>\n<tr class=\"header\">\n<th style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></th>\n<th style=\"text-align: center;\"><p>0.3</p></th>\n<th style=\"text-align: center;\"><p>0.6</p></th>\n<th style=\"text-align: center;\"><p>0.4</p></th>\n<th style=\"text-align: center;\"><p>0.1</p></th>\n<th style=\"text-align: center;\"><p>0.4</p></th>\n<th style=\"text-align: center;\"><p>0.7</p></th>\n<th style=\"text-align: center;\"><p>0.3</p></th>\n<th style=\"text-align: center;\"><p>0.1</p></th>\n<th style=\"text-align: center;\"><p>0.2</p></th>\n<th style=\"text-align: center;\"><p>0.1</p></th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>Å¶</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><strong>TN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n</tr>\n</tbody>\n</table>\n\n## PPCR (Predicted Positives Conditional Rate):\n\n$\\begin{aligned} \\ {\\scriptsize \\frac{\\text{TP + FP}}{\\text{TP + FP + TN + FN}}}\\end{aligned} = \\begin{aligned} \\ {\\scriptsize \\frac{\\text{Predicted Positives}}{\\text{Total Population}}}\\end{aligned}$\n\n-   Sometimes we will classify each observation according to the ranking of the risk in order to prioritize high-risk patients regardless their absolute risk.\n\n-   The implied assumption is that the highest risk might gain the highest benefit from the treatment and that the treatment does not carry a significant potential risk.\n\n-   This type of dichotomization is being used when the organization face **Resource Constraint**. In healthcare we call it also **Risk Percentile**.\n\n## PPCR of 0.1\n\n<table>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.6</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.7</p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.2</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>R</strong></p></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>Å¶</strong></p></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"></td>\n</tr>\n</tbody>\n</table>\n\n## PPCR of 0.1\n\n<table>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.6</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.7</p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.2</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>R</strong></p></td>\n<td style=\"text-align: center;\"><p>5.5</p></td>\n<td style=\"text-align: center;\"><p>2</p></td>\n<td style=\"text-align: center;\"><p>3.5</p></td>\n<td style=\"text-align: center;\"><p>9</p></td>\n<td style=\"text-align: center;\"><p>3.5</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>5.5</p></td>\n<td style=\"text-align: center;\"><p>9</p></td>\n<td style=\"text-align: center;\"><p>7</p></td>\n<td style=\"text-align: center;\"><p>9</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>Å¶</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><span class=\"emoji\" data-emoji=\"pill\">ğŸ’Š</span> <br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>TP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FP</strong></p></td>\n<td style=\"text-align: center;\"><p><strong>FN</strong></p></td>\n</tr>\n</tbody>\n</table>\n\n## Discrimination - Performance Curves\n\n| Curve             | Sens | Spec | PPV | PPCR | Lift |\n|:------------------|:----:|:----:|:---:|:----:|:----:|\n| ROC               |  y   |  x   |     |      |      |\n| Lift              |      |      |     |  x   |  y   |\n| Precision- Recall |  x   |      |  y  |      |      |\n| Gains             |  y   |      |     |  x   |      |\n\n## ROC Curve\n\n| Curve             | Sens  | Spec  | PPV | PPCR | Lift |\n|:------------------|:-----:|:-----:|:---:|:----:|:----:|\n| **ROC**           | **y** | **x** |     |      |      |\n| Lift              |       |       |     |  x   |  y   |\n| Precision- Recall |   x   |       |  y  |      |      |\n| Gains             |   y   |       |     |  x   |      |\n\n## ROC Curve\n\n-   The most famous form of Performance Metrics Visualization\n\n-   Displays Sensitivity (also known as True Positive Rate or Percision) on the y axis\n\n-   Displays 1 - Specificity (also known as False Positive Rate) on the x axis.\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### Why 1 - Specificity? Why not just Specificity? ğŸ™ƒ\n\nHonestly, I didn't find anywhere why *1 - Specificity* is more insightful than just *Specificity.*\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"col values\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"col values\"\n```\n:::\n\n::: {.cell-output-display}\n![](performance_evaluation_of_prediction_models_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### Why 1 - Specificity? Why not just Specificity? ğŸ™ƒ\n\nHonestly, I didn't find anywhere why *1 - Specificity* is more insightful than just *Specificity.*\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](performance_evaluation_of_prediction_models_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### Sensitivity and Specificity do not respect the flow of time ğŸ•°ï¸\n\n![](real_positives_future.jpg)\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### Sensitivity and Specificity do not respect the flow of time ğŸ•°ï¸ {.smaller}\n\n<br>\n\nSensitivity: $\\begin{aligned} \\ {\\scriptsize \\frac{\\text{TP}}{\\text{TP + FN}} = \\text{Prob( Predicted Positive | Real Positive )}}\\end{aligned}$\n\n<br>\n\nSpecificity: $\\begin{aligned} \\ {\\scriptsize \\frac{\\text{TN}}{\\text{TN + FP}} = \\text{Prob( Predicted Negative | Real Negative )} } \\end{aligned}$\n\n<br>\n\nWe do not know the condition of the Conditional Probability: Not the number of future Real Positives nor the number of future Real Negatives.\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### Sensitivity and Specificity do not respect the flow of time ğŸ•°ï¸ {.smaller}\n\n<br>\n\nPPV: $\\begin{aligned} \\ {\\scriptsize \\frac{\\text{TP}}{\\text{TP + FP}} = \\text{Prob( Real Positive | Predicted Positive )}}\\end{aligned}$\n\n<br>\n\nNPV: $\\begin{aligned} \\ {\\scriptsize \\frac{\\text{TN}}{\\text{TN + FN}} = \\text{Prob( Real Negative | Predicted Negative )} } \\end{aligned}$\n\nWe know the condition of the Conditional Probability: The number of Predicted Positives and the number of Predicted Negatives.\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### You don't care about AUROC, you care about the c-statistics\n\n-   Generally speaking more area under a curve with two \"Good\" performance metrics means better model. Other than that, there is no context and performance metrics with no context might lead to ambiguity and bad decisions.\n\n-   Another Curve: Precision-Recall is made of Sensitivity (Precision) and PPV (Recall). How much PRAUC is enough?\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### You don't care about AUROC, you care about the c-statistics\n\n-   Why not calculating GAINSAUC? Or any combination of two good performance metrics? We can get with Sensitivity, Specificity, NPV, PPV 6 AUC metrics. Do they provide any meaningful insight besides a vague *the more the better*?\n\n## What is the AUROC of the following Models?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](performance_evaluation_of_prediction_models_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n## What is the AUROC of the following Models?\n\n![](khaby.gif)\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-0af34fa272be5d60aa09\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0af34fa272be5d60aa09\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"population\":[\"First Model\",\"Second Model\"],\"auc\":[0.9586,0.8648]},\"columns\":[{\"accessor\":\"population\",\"name\":\"Model\",\"type\":\"factor\",\"show\":true,\"cell\":[{\"name\":\"Fragment\",\"attribs\":[],\"children\":[{\"name\":\"span\",\"attribs\":{\"style\":{\"display\":\"inline-block\",\"marginRight\":\"8px\",\"width\":\"9px\",\"height\":\"9px\",\"backgroundColor\":\"#1b9e77\",\"borderRadius\":\"50%\"}},\"children\":[]},\"First Model\"]},{\"name\":\"Fragment\",\"attribs\":[],\"children\":[{\"name\":\"span\",\"attribs\":{\"style\":{\"display\":\"inline-block\",\"marginRight\":\"8px\",\"width\":\"9px\",\"height\":\"9px\",\"backgroundColor\":\"#d95f02\",\"borderRadius\":\"50%\"}},\"children\":[]},\"Second Model\"]}],\"minWidth\":300},{\"accessor\":\"auc\",\"name\":\"AUROC\",\"type\":\"numeric\",\"cell\":[{\"name\":\"div\",\"attribs\":{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\"}},\"children\":[\"0.96\",{\"name\":\"div\",\"attribs\":{\"style\":{\"flexGrow\":1,\"marginLeft\":\"8px\",\"background\":\"#e1e1e1\"}},\"children\":[{\"name\":\"div\",\"attribs\":{\"style\":{\"background\":\"green\",\"width\":\"95.86%\",\"height\":\"16px\"}},\"children\":[]}]}]},{\"name\":\"div\",\"attribs\":{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\"}},\"children\":[\"0.86\",{\"name\":\"div\",\"attribs\":{\"style\":{\"flexGrow\":1,\"marginLeft\":\"8px\",\"background\":\"#e1e1e1\"}},\"children\":[{\"name\":\"div\",\"attribs\":{\"style\":{\"background\":\"green\",\"width\":\"86.48%\",\"height\":\"16px\"}},\"children\":[]}]}]}],\"minWidth\":300,\"align\":\"left\"}],\"sortable\":false,\"defaultPageSize\":10,\"paginationType\":\"numbers\",\"showPageInfo\":true,\"minRows\":1,\"inline\":true,\"theme\":{\"backgroundColor\":\"#fdf6e3\"},\"dataKey\":\"3f38f391c186fb012470a2d5b009ebb9\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### You don't care about AUROC, you care about the c-statistics\n\n-   High Ink-to-information ratio ğŸ˜µ\n\n-   One might suggest that the visual aspect is useful, but as human beings we are really bad at interpreting round things (That's why pie-charts are considered to be bad practice).\n\n<!-- -->\n\n-   Yet, the AUROC is valuable because of the equivalence to the c-statistics and it might provide good intuition about the performance of the model.\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### You don't care about AUROC, you care about the c-statistics\n\n-   If you'll take randomly one event and one non-event, the probability that the event will be estimated with higher probability is exactly the AUROC.\n\n-   AUROC = p( pÌ‚(ğŸ¤¨) \\> pÌ‚(ğŸ¤¢) )\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### You don't care about AUROC, you care about the c-statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprobs <- c(0.3, 0.6, 0.4, 0.1, 0.4, 0.7, 0.3, 0.1, 0.2, 0.1)\nreals <- c(0, 1, 1, 0, 1, 1, 0, 0, 1, 0)\n\npROC::auc(reals, probs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nArea under the curve: 0.92\n```\n:::\n\n```{.r .cell-code}\nprobs_events <- probs[reals == 1]\nprobs_nonevents <- probs[reals == 0]\n\nprop.table(\n  table(\n    sample(probs_events, replace = TRUE, size = 10000) >\n    sample(probs_nonevents, replace = TRUE, size = 10000)\n  )\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n FALSE   TRUE \n0.0796 0.9204 \n```\n:::\n:::\n\n\n## Why I don't like ROC Curve ğŸ˜¤\n\n### You don't care about AUROC, you care about the c-statistics\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport numpy as np\nimport random\n\nprobs = np.array([0.3, 0.6, 0.4, 0.1, 0.4, 0.7, 0.3, 0.1, 0.2, 0.1])\nreals = np.array([0, 1, 1, 0, 1, 1, 0, 0, 1, 0])\n\nprobs_events = probs[reals == 1]\nprobs_nonevents = probs[reals == 0]\n\nevent_prob_greater_than_nonevent_prob = np.greater(\n  random.choices(sorted(probs_events), \n  k = 10000),\n  random.choices(sorted(probs_nonevents), \n  k = 10000)\n)\n\nunique_elements, counts_elements = np.unique(\n  event_prob_greater_than_nonevent_prob, return_counts=True)\n\ncounts_elements / 10000\n```\n\n::: {.cell-output .cell-output-stdout}\n```\narray([0.0781, 0.9219])\n```\n:::\n:::\n\n\n## Good AUROC does not necessarily mean a Good model\n\n<table style=\"width:99%;\">\n<colgroup>\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th style=\"text-align: center;\"><p>Age</p></th>\n<th style=\"text-align: center;\"><p>64</p></th>\n<th style=\"text-align: center;\"><p>86</p></th>\n<th style=\"text-align: center;\"><p>56</p></th>\n<th style=\"text-align: center;\"><p>7</p></th>\n<th style=\"text-align: center;\"><p>78</p></th>\n<th style=\"text-align: center;\"><p>85</p></th>\n<th style=\"text-align: center;\"><p>6</p></th>\n<th style=\"text-align: center;\"><p>12</p></th>\n<th style=\"text-align: center;\"><p>67</p></th>\n<th style=\"text-align: center;\"><p>73</p></th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.6</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.7</p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.2</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n</tbody>\n</table>\n\nAUROC shows how well your model discriminates between events and non-events given a target population.\n\n## Good AUROC does not necessarily mean a Good model\n\n<table style=\"width:99%;\">\n<colgroup>\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n<col style=\"width: 8%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th style=\"text-align: center;\"><p>Age</p></th>\n<th style=\"text-align: center;\"><p>64</p></th>\n<th style=\"text-align: center;\"><p>86</p></th>\n<th style=\"text-align: center;\"><p>56</p></th>\n<th style=\"text-align: center;\"><p>7</p></th>\n<th style=\"text-align: center;\"><p>78</p></th>\n<th style=\"text-align: center;\"><p>85</p></th>\n<th style=\"text-align: center;\"><p>6</p></th>\n<th style=\"text-align: center;\"><p>12</p></th>\n<th style=\"text-align: center;\"><p>67</p></th>\n<th style=\"text-align: center;\"><p>73</p></th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"><p><strong>pÌ‚</strong></p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.6</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.4</p></td>\n<td style=\"text-align: center;\"><p>0.7</p></td>\n<td style=\"text-align: center;\"><p>0.3</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n<td style=\"text-align: center;\"><p>0.2</p></td>\n<td style=\"text-align: center;\"><p>0.1</p></td>\n</tr>\n<tr class=\"even\">\n<td style=\"text-align: center;\"><p><strong>Y</strong></p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n<td style=\"text-align: center;\"><p>1</p></td>\n<td style=\"text-align: center;\"><p>0</p></td>\n</tr>\n<tr class=\"odd\">\n<td style=\"text-align: center;\"></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"older_woman\">ğŸ‘µ</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"child\">ğŸ§’</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"older_woman\">ğŸ‘µ</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"child\">ğŸ§’</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"child\">ğŸ§’</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"nauseated_face\">ğŸ¤¢</span></p></td>\n<td style=\"text-align: center;\"><p><br />\n<span class=\"emoji\" data-emoji=\"raised_eyebrow\">ğŸ¤¨</span></p></td>\n</tr>\n</tbody>\n</table>\n\nThis model has AUROC = 0.92, but the number is misleading:\\\nThe Target Population is not well defined.\n\n## Bad AUROC does not necessarily mean a Bad model\n\n+-------+-----+-----+-----+-----+-----+\n| Age   | 64  | 56  | 78  | 67  | 73  |\n+:=====:+:===:+:===:+:===:+:===:+:===:+\n| **pÌ‚** | 0.3 | 0.4 | 0.4 | 0.2 | 0.1 |\n+-------+-----+-----+-----+-----+-----+\n| **Y** | 0   | 1   | 1   | 1   | 0   |\n+-------+-----+-----+-----+-----+-----+\n|       | \\   | \\   | \\   | \\   | \\   |\n|       | ğŸ¤¨  | ğŸ¤¢  | ğŸ¤¢  | ğŸ¤¢  | ğŸ¤¨  |\n+-------+-----+-----+-----+-----+-----+\n\nThis model has AUROC = 0.83, but the number is misleading:\\\nThe Target Population is well defined.\n\n## Lift Curve\n\n| Curve             | Sens | Spec | PPV | PPCR  | Lift  |\n|:------------------|:----:|:----:|:---:|:-----:|:-----:|\n| ROC               |  y   |  x   |     |       |       |\n| **Lift**          |      |      |     | **x** | **y** |\n| Precision- Recall |  x   |      |  y  |       |       |\n| Gains             |  y   |      |     |   x   |       |\n\n## Lift Curve\n\n-   Lift is the ratio between the PPV and the Prevalence.\n\n-   Lift Curve displays Lift on the Y axis and PPCR (Predicted Positives Conditional Rate) on the X axis.\n\n-   In other words, lift shows how much the prediction is doing better than a random guess in terms of PPV.\n\n-   The reference line stands for the Lift of a random guess for a given PPCR, which is always equal to 1 because the observations are not sorted.\n\n## Precision-Recall\n\n| Curve             | Sens  | Spec | PPV | PPCR  | Lift |\n|:------------------|:-----:|:----:|:---:|:-----:|:----:|\n| ROC               |   y   |  x   |     |       |      |\n| Lift              |       |      |     |   x   |  y   |\n| Precision- Recall |   x   |      |  y  |       |      |\n| **Gains**         | **y** |      |     | **x** |      |\n\n## Precision Recall Curve\n\n-   Precision-Recall Curve displays PPV on the y axis and Sensitivity on the x axis.\n\n-   The reference line stands for the PPV of a random guess which is always equal to the prevalence and the Sensitivity of a random guess\n\n## Gains Curve\n\n| Curve             | Sens  | Spec | PPV | PPCR  | Lift |\n|:------------------|:-----:|:----:|:---:|:-----:|:----:|\n| ROC               |   y   |  x   |     |       |      |\n| Lift              |       |      |     |   x   |  y   |\n| Precision- Recall |   x   |      |  y  |       |      |\n| **Gains**         | **y** |      |     | **x** |      |\n\n## Gains Curve\n\n-   Gains Curve displays Sensitivity on the y axis and PPCR on the x axis.\n\n-   Gains shows the Sensitivity for a given PPCR.\n\n-   The reference lines stand for\n\n# Calibration **âš–ï¸** \n\n## Calibration **âš–ï¸**\n\nHow well the model is \"calibrated\".\n\nPatients with a probability of about 0.2 to have an event have a proportion of about 0.2 events.\n\nUnlike continuous outcomes in prediction of binary outcomes the prediction is continuous while the outcome is binary. In order to asses calibration we need to use quantiles of estimated probabilities (discrete version of calibration) or some kind of smoothing algorithm (gam or smoth).\n\nThe main idea is to visually inspect for similarty with the linear line of 45 deg.\n\nIf you use smoothed calibration, watch the ranges of the curve! It might look bad if you don't zoom-in to the reasonable range of estimated probabilities.\n\nWhy should we care?\\\nIf you use logistic regression the model is calibrated by default, but if you use fancy ML prediction models they might not. This can be easily by remodelling of the predictions with simple logistic regression (recalibration), Python users might use <https://scikit-learn.org/stable/modules/generated/sklearn.calibration.CalibratedClassifierCV.html>.\n\nVisual inspection might be problamatic, but from my humble experience is good enough to see if there's something inherently wrong.\n\nOptimizing over the logloss function will produce calibrated model.\n\n# Utility **ğŸ‘Œ**\n\n## Utility **ğŸ‘Œ**\n\nIn order to make a decision, we need to optimize utility. This requires some kind of price from the clinicians.\\\nThis price is the odds of the probability threshold.\n\nUnlike other performance metrics, NB is based on decision making theory (which is reasonable, because we want to do better decision making).\n\nAlways consider two baseline approaches: Treat All and Treat None.\n",
    "supporting": [
      "performance_evaluation_of_prediction_models_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"performance_evaluation_of_prediction_models_files/libs/core-js-2.5.3/shim.min.js\"></script>\r\n<script src=\"performance_evaluation_of_prediction_models_files/libs/react-17.0.0/react.min.js\"></script>\r\n<script src=\"performance_evaluation_of_prediction_models_files/libs/react-17.0.0/react-dom.min.js\"></script>\r\n<script src=\"performance_evaluation_of_prediction_models_files/libs/reactwidget-1.0.0/react-tools.js\"></script>\r\n<script src=\"performance_evaluation_of_prediction_models_files/libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\r\n<script src=\"performance_evaluation_of_prediction_models_files/libs/reactable-binding-0.3.0/reactable.js\"></script>\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}